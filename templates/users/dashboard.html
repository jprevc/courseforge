{% extends "base.html" %}

{% block title %}Dashboard â€“ CourseForge{% endblock %}

{% block content %}
<h1>Dashboard</h1>
<p>Welcome, {{ user.username }}.</p>

<div class="card-grid card-grid-actions">
    <a href="{% url 'courses:list' %}" class="card card-action card-link">
        <i class="fa-solid fa-book card-action-icon" aria-hidden="true"></i>
        <h3>Browse all courses</h3>
        <p>Find and take courses on any topic.</p>
    </a>
    <a href="{% url 'courses:create' %}" class="card card-action card-link">
        <i class="fa-solid fa-wand-magic-sparkles card-action-icon" aria-hidden="true"></i>
        <h3>Create a new course</h3>
        <p>Generate a course with AI from a topic.</p>
    </a>
</div>

<h2>My courses</h2>
{% if courses_with_progress %}
<div class="card-grid">
    {% for item in courses_with_progress %}
    <a href="{% url 'courses:detail' item.course.slug %}" class="card card-link card-course">
        <strong class="card-course-title">{{ item.course.title }}</strong>
        {% if item.course.overview %}
        <p class="card-course-excerpt">{{ item.course.overview|truncatewords:12 }}</p>
        {% endif %}
        <div class="card-course-meta">
            <span><i class="fa-solid fa-dumbbell" aria-hidden="true"></i> {{ item.total_exercises }} exercise{{ item.total_exercises|pluralize }}</span>
        </div>
        {% if item.completed_exercises > 0 and item.total_exercises > 0 %}
        <div class="card-course-progress" aria-label="{{ item.completed_exercises }} of {{ item.total_exercises }} exercises completed">
            <div class="card-course-progress-bar" style="width: {{ item.progress_pct }}%"></div>
        </div>
        <span class="card-course-progress-label">{{ item.completed_exercises }}/{{ item.total_exercises }} done</span>
        {% endif %}
    </a>
    {% endfor %}
</div>
{% else %}
<div class="card card-muted">
    <div class="empty-state">
        <i class="fa-solid fa-circle-plus empty-state-icon"></i>
        <p>You haven't created any courses yet.</p>
        <a href="{% url 'courses:create' %}" class="btn-primary">Create your first course</a>
    </div>
</div>
{% endif %}
{% endblock %}
